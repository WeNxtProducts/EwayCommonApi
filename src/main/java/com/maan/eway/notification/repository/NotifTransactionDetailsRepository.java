/*
 * Java domain class for entity "NotifTransactionDetails" 
 * Created on 2023-01-07 ( Date ISO 2023-01-07 - Time 17:12:16 )
 * Generated by Telosys Tools Generator ( version 3.3.0 )
 */
 
 /*
 * Created on 2023-01-07 ( 17:12:16 )
 * Generated by Telosys ( http://www.telosys.org/ ) version 3.3.0
 */


package com.maan.eway.notification.repository;

import java.util.Date;
import java.util.List;

import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.PagingAndSortingRepository;
import org.springframework.data.repository.query.Param;

import com.maan.eway.notification.bean.NotifTransactionDetails;

import jakarta.transaction.Transactional;
/**
 * <h2>NotifTransactionDetailsRepository</h2>
 *
 * createdAt : 2023-01-07 - Time 17:12:16
 * <p>
 * Description: "NotifTransactionDetails" Repository
 */
 
 
 
public interface NotifTransactionDetailsRepository  extends JpaRepository<NotifTransactionDetails,Integer > , JpaSpecificationExecutor<NotifTransactionDetails> ,PagingAndSortingRepository<NotifTransactionDetails, Integer> {
	@Transactional
	List<NotifTransactionDetails> findByNotifPushedStatus(String string);//, Pageable secondPageWithFiveElements);

	List<NotifTransactionDetails> findByNotifPushedStatusAndNotifcationPushDateGreaterThanEqualAndNotifcationEndDateLessThanEqual(
			String string, Date d, Date d2);

	List<NotifTransactionDetails> findByNotifPushedStatusAndNotifcationPushDateLessThanEqualAndNotifcationEndDateGreaterThanEqual(
			String string, Date d, Date d2,Pageable paging);

	List<NotifTransactionDetails> findByNotifPushedStatusAndNotifcationPushDateLessThanEqualAndNotifcationEndDateGreaterThanEqualOrderByNotifPriorityDesc(
			String string, Date d, Date d2, Pageable pages);

	List<NotifTransactionDetails> findByNotifNoOrderByEntryDateDesc(Integer valueOf);

	List<NotifTransactionDetails> findByQuoteNo(String quoteNo);

	Integer countByTinyUrlActiveAndTinyUrlId(String string, String object);
	@Modifying
	@Transactional
	@Query(value="UPDATE notif_transaction_details SET TINY_URL_ACTIVE='N' WHERE TINY_GROUP_ID=:tinyGroupId AND TINY_URL_ID!=:tinyUrlId",nativeQuery = true)
	void updateOtherActiveTinyUrl(@Param("tinyGroupId") String tinyGroupId,@Param("tinyUrlId") String tinyUrlId);


	
}
